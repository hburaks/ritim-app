# T2.6.3 — Konular Sekmesi Ders Chip'leri ile DayEntrySheet Ders Setini Tekilleştirme

**Durum: TAMAMLANDI**

## Amaç
Track sistemiyle uyumlu olacak şekilde, Topics ekranındaki ders chip'lerini DayEntrySheet ile aynı kaynaktan beslemek.

## Uygulanan Kararlar
- TopicsScreen ders chip listesi artık `getSubjectsForActiveTrack(activeTrack)` üzerinden üretiliyor.
- LGS7/LGS8'de konusu olmayan dersler (ör. `ingilizce`) chip olarak görünüyor, seçildiğinde ders bazlı empty state çıkıyor.
- TYT/AYT için mevcut track-level empty state davranışı korundu.
- `TopicItem.subject` alanı kaldırılmadı; geriye dönük uyumluluk için bırakıldı.
- `TopicItem` modeline yeni `subjectKey` alanı eklendi ve filtreleme bunun üzerinden yapıldı.
- Topic `id` değerleri değiştirilmedi; mood map davranışı korunmuş oldu.

## Teknik Uygulama

### 1) TopicsScreen kaynak tekilleştirme
**Dosya:** `ritim/screens/TopicsScreen.tsx`

- Hardcoded filter listesi kaldırıldı.
- Chip'ler aktif track subject setinden üretildi.
- Filtre state'i `activeSubjectKey` olarak tutuldu.
- `topics.filter(topic => topic.subjectKey === activeSubjectKey)` ile ders bazlı filtreleme yapıldı.

### 2) Filter reset kuralı
**Dosya:** `ritim/screens/TopicsScreen.tsx`

- Track veya subject listesi değiştiğinde filtre otomatik resetleniyor:
  - `activeSubjectKey = subjectDefs[0]?.key ?? null`

### 3) Ders bazlı empty state
**Dosya:** `ritim/screens/TopicsScreen.tsx`

- Seçili dersin konusu yoksa aşağıdaki metinler gösteriliyor:
  - "Bu dersin konuları yakında."
  - "Şimdilik kayıt ekranından süre/soru girişi yapabilirsin."
- Bu iterasyonda "Kayıt Ekle" butonu eklenmedi.

### 4) Topics veri modeli güncellemesi
**Dosya:** `ritim/state/topics.tsx`

- `TopicItem` içine `subjectKey` eklendi.
- Eski `subject` alanı korunarak uyumluluk sağlandı.
- Seed verilerde `subjectKey` değerleri track key setiyle hizalandı:
  - `mat`, `turkce`, `fen`, `inkilap`, `din`
- Tüm topic `id` değerleri aynı bırakıldı.

## Değişen Dosyalar
- `ritim/screens/TopicsScreen.tsx`
- `ritim/state/topics.tsx`

## Acceptance (Durum)
- [x] TopicsScreen üst ders chip'leri aktif track subject listesiyle aynı seti gösteriyor.
- [x] LGS7/LGS8'de DayEntrySheet ders seti Topics chip setiyle eşleşiyor.
- [x] Konusu olan derslerde topic listesi gösteriliyor.
- [x] Konusu olmayan ders seçilince ders bazlı empty state gösteriliyor.
- [x] TYT/AYT track-level empty state davranışı korunuyor.
- [x] Faz-1 sade UX yaklaşımı bozulmadı.

## Test Senaryoları
1. LGS7 seç, Topics chip'lerinde Matematik/Türkçe/Fen/İnkılap/İngilizce/Din göründüğünü doğrula.
2. LGS7'de Matematik seç, topic listesi gösterildiğini doğrula.
3. LGS7'de İngilizce seç, ders bazlı empty state çıktığını doğrula.
4. LGS8'de aynı davranışın devam ettiğini doğrula.
5. TYT veya AYT seç, track-level empty state ve "Track'i Değiştir" butonunu doğrula.
6. DayEntrySheet ders listesi ile Topics chip listesinin aynı kaynaktan geldiğini doğrula.

## Kapsam Dışı
- TYT/AYT topics datası eklemek
- Topics mood'larını Supabase'e sync etmek
- Deneme/Exam ekranları
